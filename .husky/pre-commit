#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Checking for MDX changes..."

# Check if there are any MDX files in the staging area
MDX_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.mdx$' || true)

if [ -n "$MDX_FILES" ]; then
  echo "ğŸ“ Found MDX changes, converting to MD..."
  echo "$MDX_FILES"
  
  # Run the conversion
  npm run generate-llms:pre-commit
  
  echo "âœ… MD files generated and added to commit"
else
  echo "â„¹ï¸  No MDX changes detected"
  
  echo "ğŸ” Checking if all MDX files have corresponding MD files..."
  npm run generate-llms:pre-commit
fi

echo "âœ… Pre-commit checks passed"
