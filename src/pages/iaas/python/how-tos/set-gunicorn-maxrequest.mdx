import Layout from "@/components/Layout";
import Button from "@/components/Common/button";
import Section from "@/components/Common/section";
import Alert from "@/components/Common/alert";
import Tabs from "@/components/Common/tab";
import Step from "@/components/Common/step";
import Card from "@/components/Common/card";
import Important from "@/components/Common/important";
import Highlight from "@/components/Common/highlight";
import Link from "next/link";
import NextPage from "@/components/Common/nextpage";

import Head from "next/head";

<Layout>
<Head>
<title>مستندات تنظیم max_request در Gunicorn در Python - لیارا</title>

<meta property="og:title" content="مستندات خدمات رایانش ابری لیارا" />
<meta property="og:description" content="مستندات نحوه تنظیم مقدار max_request در Gunicorn در پلتفرم Python در لیارا"  />
<meta property="og:image" content="https://files.liara.ir/liara/logos/liara-poster.jpg" />
</Head>
# تنظیم max_request در Gunicorn در برنامه‌های Python
<hr className="mb-2" />

در <a href="https://gunicorn.org/" className="text-[#2196f3] ">Gunicorn</a>، پارامتر <Important>max_requests</Important> تعداد درخواست‌هایی را که هر Worker باید قبل از retirement (خاتمه کار) پردازش کند، مشخص می‌کند. پس از رسیدن یک Worker به این اندازه، به طور خودکار retired می‌شود و یک Worker جدید جایگزین آن می‌شود. 

یکی از راه‌های جلوگیری از نشت حافظه و مصرف بالای RAM در Gunicorn، تنظیم پارامتر <Important>max_requests</Important> است. با تنظیم این پارامتر، با رسیدن تعداد درخواست‌های هر یک از Threadهای Gunicorn به این عدد، آن Thread ری‌استارت شده و حافظه‌ی RAM آن خالی می‌شود.
در صورتی که در برنا‌مه‌ی Python خود نیاز به ری‌استارت WORKER THREAD بعد از تعداد مشخصی Request دارید، می‌توانید طبق مستندات <a href="/paas/details/envs" className="text-[#2196f3] ">تنظیم متغیرهای محیطی</a>، متغیر محیطی <Important>GUNICORN_MAX_REQUESTS</Important> را با مقدار 1000 به برنامه Python خود، اضافه کنید.

<div className="h-2" />
<Alert variant="info">
<p>
مقدار پیش‌فرض این متغیر در برنامه‌های Python، برابر با 10000 است.
</p>
</Alert>


</Layout>