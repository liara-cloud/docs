import Layout from "@/components/Layout";
import Button from "@/components/Common/button";
import Section from "@/components/Common/section";
import Alert from "@/components/Common/alert";
import Tabs from "@/components/Common/tab";
import Step from "@/components/Common/step";
import Card from "@/components/Common/card";
import Important from "@/components/Common/important";
import Highlight from "@/components/Common/highlight";
import Link from "next/link";

import Head from "next/head";

<Layout>
<Head>
<title>مستندات استقرار برنامه‌های Python - لیارا</title>

<meta property="og:title" content="مستندات خدمات رایانش ابری لیارا" />
<meta property="og:description" content="مستندات نحوه استقرار سریع پلتفرم Python در لیارا"  />
<meta property="og:image" content="https://files.liara.ir/liara/logos/liara-poster.jpg" />
</Head>

# استقرار سریع برنامه‌های Python
<hr className="mb-2" />

<p>
در نظر داشته باشید که
برای استقرار ساده‌تر و بهینه‌تر برنامه‌های مبتنی بر <a href="/paas/flask/getting-started/" className="text-[#2196f3]">Flask</a> و <a href="/paas/django/getting-started/" className="text-[#2196f3]">Django</a>، می‌توانید از پلتفرم‌های مخصوص خودشان، 
استفاده کنید و در صورتی که برنامه‌تان شامل این دو فریم‌ورک نیست، می‌توانید از پلتفرم پایتون، بهره ببرید. 
</p>

<Tabs 
  tabs={["Liara Console", "Liara CLI", "Github"]} 
  content={[
  <>
  <video
  src="https://files.liara.ir/liara/python/python-desktop.mp4"
  controls="control/s"
  className="block w-full"
  width="100%"
  ></video>
  <div className="h-2" />
  برای استقرار با استفاده از ابزار <Link className="text-[#2196f3] " href="/references/console/about">Liara Console</Link> کافیست تا مراحل زیر را طی کنید:
  <Step  steps={[
{
  step: "۱",
  content: (
  <>
    <h3>ورود به حساب کاربری</h3>   
    <p>وارد <Link className="text-[#2196f3] " href="https://console.liara.ir">کنسول لیارا</Link> شوید و با وارد کردن ایمیل یا شماره همراه ثبت شده، به اکانت خود در لیارا، لاگین کنید.</p>
  </>
  )
  },
  {
  step: "۲",
  content: (
  <>
    <h3>ایجاد برنامه</h3>
    <p>برنامه Python خود را با شناسه، <Link className="text-[#2196f3] " href="../details/private-network">شبکه خصوصی</Link> و <Link className="text-[#2196f3] " href="../details/plans/about">منابع سخت‌افزاری و بسته امکانات</Link> مدنظرتان ایجاد کنید.</p>
  </>
  )
  },
  {
  step: "۳",
  content: (
  <>
    <h3>حذف فایل‌های اضافی</h3>
    <p>پوشه‌ها و فایل‌های درون پروژه که قصد ندارید در لیارا آپلود شوند (به عنوان مثال پوشه‌های venv. و dist) را پاک کنید.</p>  
  </>
  )
  },
  {
  step: "۴",
  content: (
  <>
    <h3>تنظیم فایل‌ requirements.txt</h3>
    <p>در صورتی که از کتابخانه یا پکیج خاصی استفاده می‌کنید که به صورت built-in (پیش‌فرض) در پایتون وجود ندارد، حتماً باید در مسیر اصلی پروژه، فایل <Important>requirements.txt</Important> وجود داشته باشد؛
    اگر که این فایل وجود ندارد، می‌توانید با اجرای دستور زیر (با فرض فعال بودن محیط مجازی برنامه)، این فایل را ایجاد کنید:
    </p>
    <div className="h-2" />
    <div dir='ltr'>
    <Highlight className="bash">
      {`pip freeze > requirements.txt `}
    </Highlight>
    </div>
  </>
  )
  },
  {
  step: "۵",
  content: (
  <>
    <h3>زیپ و آپلود پروژه</h3>
    <p>پوشه پروژه را در یک فایل <Important>zip</Important> قرار دهید. فایل را کشیده و در باکس آپلود Liara Console رها کنید.</p>
  </>
  )
  },
  {
  step: "۶",
  content: (
  <>
    <h3>استقرار پروژه</h3>
    <p>مرحله به مرحله استقرار را با Console جلو بروید و شخصی‌سازی‌های لازم را انجام دهید و در نهایت بر روی گزینه استقرار کلیک کنید تا عملیات استقرار، آغاز شود. </p>
  </>
  )
  }

]}/>
  </>,

  <>
  <video
  src="https://files.liara.ir/liara/python/python-cli.mp4"
  controls="controls"
  className="block w-full"
  width="100%"
  ></video>
  <div className="h-2" />

  برای استقرار با استفاده از ابزار <Link className="text-[#2196f3] " href="/references/cli/about">Liara CLI</Link> کافیست تا مراحل زیر را طی کنید:
  <Step  steps={[
{
  step: "۱",
  content: (
  <>
    <h3>نصب Liara CLI</h3>
    <p>ترمینال را باز کنید و با اجرای دستور زیر، ابزار Liara CLI را بر روی سیستم خود نصب کنید:</p>
    <div dir='ltr'>
      <Highlight className="bash">
        {`npm install -g @liara/cli`}
      </Highlight>
    </div>
    <div className="h-2" />
    <Alert variant="info">
    <p>
    دقت کنید که <Link className="text-[#2196f3] " href="https://nodejs.org">npm و NodeJS</Link> باید بر روی سیستم‌عامل‌تان نصب باشد.
    </p>
    </Alert>
    <div className="h-2" />
    <Alert variant="warning">در ویندوز، ترمینال باید بر روی CMD تنظیم باشد.</Alert>
  </>
  )
  },
  {
  step: "۲",
  content: (
  <>
    <h3>لاگین به حساب کاربری</h3>
    <p>با اجرای دستور زیر، وارد حساب کاربری خود در لیارا، شوید:</p>
    <div dir='ltr'>
      <Highlight className="bash">
        {`liara login`}
      </Highlight>
    </div>
  </>
  )
  },
  {
  step: "۳",
  content: (
  <>
    <h3>ایجاد شبکه خصوصی</h3>
    <p>با دستور زیر، <Link className="text-[#2196f3] " href="../details/private-network">شبکه خصوصی</Link> برنامه خود را ایجاد کنید:</p>
    <div dir='ltr'>
      <Highlight className="bash">
        {`liara network create`}
      </Highlight>
    </div>
    <div className="h-2" />
    <Alert variant="info">اگر که از قبل شبکه خصوصی ایجاد کرده‌اید؛ نیازی به انجام این کار نیست.</Alert>
  </>
  )
  },
  {
  step: "۴",
  content: (
  <>
    <h3>ایجاد برنامه</h3>
    <p>با اجرای دستور زیر، برنامه Python خود را ایجاد کنید:</p>
    <div dir='ltr'>
    <Highlight className="bash">
      {`liara create`}
    </Highlight>
    </div>
    <div className="h-2" />
    <Alert variant="info">اگر که از قبل برنامه خود را ایجاد کرده‌اید؛ نیازی به انجام این کار نیست.</Alert>
    <p>در ادامه اجرای این دستور، باید به ترتیب، شناسه، نوع پلتفرم (که باید بر روی Python تنظیم شود)، شبکه خصوصی و <Link className="text-[#2196f3] " href="../details/plans/about">منابع سخت‌افزاری و بسته امکانات برنامه</Link>، مشخص شوند.</p>
  </>
  )
  },
  {
  step: "۵",
  content: (
  <>
    <h3>نادیده گرفتن فایل‌های اضافی</h3>
    <p>برای آپلود نشدن فایل‌های اضافی، از <Important>gitignore.</Important> یا <Important>liaraignore.</Important> استفاده کنید و درون یکی از این دو فایل، اسامی دایرکتوری‌ها و فایل‌های اضافی را بیاورید. به عنوان مثال:</p>
    <div dir='ltr'>
    <Highlight className="gitignore">
      {`env/
.env
.venv/ 
.cache`}
    </Highlight>
    </div>
  </>
  )
  },
  {
  step: "۶",
  content: (
  <>
    <h3>تنظیم فایل‌ requirements.txt</h3>
    <p>در صورتی که از کتابخانه یا پکیج خاصی استفاده می‌کنید که به صورت built-in (پیش‌فرض) در پایتون وجود ندارد، حتماً باید در مسیر اصلی پروژه، فایل <Important>requirements.txt</Important> وجود داشته باشد؛
    اگر که این فایل وجود ندارد، می‌توانید با اجرای دستور زیر (با فرض فعال بودن محیط مجازی برنامه)، این فایل را ایجاد کنید:
    </p>
    <div className="h-2" />
    <div dir='ltr'>
    <Highlight className="bash">
      {`pip freeze > requirements.txt `}
    </Highlight>
    </div>
  </>
  )
  },
  {
  step: "۷",
  content: (
  <>
    <h3>استقرار برنامه</h3>
    <p>با اجرای دستور زیر در مسیر اصلی پروژه، برنامه خود را  در لیارا مستقر کنید (بعد از <Important>app--</Important> شناسه برنامه خود را وارد کنید و در صورتی که برنامه‌تان وب‌سرور است و در پورت خاصی به درخواست کاربران گوش می‌دهد؛ بعد از 
    <Important>port--</Important>، پورت برنامه را، وارد کنید):</p>
    <div className="h-2" />
    <div dir='ltr'>
    <Highlight className="bash">
      {`liara deploy --app=myapp --port=8000 --platform=python`}
    </Highlight>
    </div>
      <div className="h-2" />
    <p>
       برای استقرار برنامه در تیم مدنظرتان، کافیست تا از <a href="/references/api/about/#team-id" className="text-[#2196f3]">شناسه تیم</a> و فلگ <Important>team-id--</Important> استفاده کنید: 
    </p>
    <div className="h-2" />
    <div dir='ltr'>
    <Highlight className="bash">
      {`liara deploy --app=myapp --platform=python --port=8000 --team-id=your-unique-team-id`}
    </Highlight>
    </div>
  </>
  )
  }

]}/>
  </>,
  <>
    <video
    src="https://files.liara.ir/liara/docs/python-github.mp4"
    controls="controls"
    className="block w-full"
    width="100%"
    ></video>
    <br />
    برای استقرار با Github، کافیست تا مراحل زیر را طی کنید:
    <Step  steps={[
{
  step: "۱",
  content: (
  <>
    <h3>ورود به حساب کاربری</h3>   
    <p>وارد <Link className="text-[#2196f3] " href="https://console.liara.ir">کنسول لیارا</Link> شوید و با وارد کردن ایمیل یا شماره همراه ثبت شده، به اکانت خود در لیارا، لاگین کنید.</p>
  </>
  )
  },
  {
  step: "۲",
  content: (
  <>
    <h3>ایجاد برنامه</h3>
    <p>برنامه Python خود را با شناسه، <Link className="text-[#2196f3] " href="../details/private-network">شبکه خصوصی</Link> و <Link className="text-[#2196f3] " href="../details/plans/about">منابع سخت‌افزاری و بسته امکانات</Link> مدنظرتان ایجاد کنید.</p>
  </>
  )
  },
  {
  step: "۳",
  content: (
   <>
    <h3>تنظیم فایل‌ requirements.txt</h3>
    <p>در صورتی که از کتابخانه یا پکیج خاصی استفاده می‌کنید که به صورت built-in (پیش‌فرض) در پایتون وجود ندارد، حتماً باید در مسیر اصلی پروژه، فایل <Important>requirements.txt</Important> وجود داشته باشد؛
    اگر که این فایل وجود ندارد، می‌توانید با اجرای دستور زیر (با فرض فعال بودن محیط مجازی برنامه)، این فایل را ایجاد کنید:
    </p>
    <div className="h-2" />
    <div dir='ltr'>
    <Highlight className="bash">
      {`pip freeze > requirements.txt `}
    </Highlight>
    </div>
  </>
  )
  },
  {
  step: "۴",
  content: (
  <>
    <h3>ساخت فایل <Important>liara.json</Important></h3>
    <p>
      در مسیر اصلی پروژه، یک فایل به نام <Important>liara.json</Important> ایجاد کنید و پیکربندی‌های مدنظرتان را در این فایل بنویسید؛ به عنوان مثال:
    </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`{
  "python": {
    "mirror": true,
    "port": 8000,
    "version": "3.12",
    "timezone": "America/Los_Angeles"
  }
}`}
            </Highlight>
        </div>
        <Alert variant='error'>
          <p>
            در فایل فوق، برای جلوگیری از خطا خوردن فرایند استقرار، از فیلدهای <Important>app</Important> و <Important>platform</Important> استفاده نکنید؛ چرا که لیارا، آن‌ها را به صورت خودکار، تشخیص خواهد داد.
          </p>  
        </Alert>
        <Alert variant='info'>
          <p>
              در صورتی که برنامه وب‌سرور است و در پورت خاصی به درخواست کاربران گوش می‌کند؛ می‌توانید پورت برنامه را در فیلد <Important>port</Important>، مشخص کنید.
          </p>  
        </Alert>
  </>
  )
  },
  {
  step: "۵",
  content: (

  <>
    <h3>ساخت ریپازیتوری در گیت‌هاب</h3>
    <p>
      یک ریپازیتوری در حساب گیت‌هاب خود برای برنامه‌مدنظرتان با نام دلخواه‌تان ایجاد کنید.
    </p>
  <div className="h-2" />
  <Alert variant="success">
<p>
در صورتی که از قبل، این کار را انجام داده‌اید یا قصد دارید از ریپازیتوری‌های فعلی خود استفاده کنید؛ از این مرحله بگذرید.
</p>
</Alert>
  </>
  )
  },
  {
  step: "۶",
  content: (
  <>
    <h3>آپلود پروژه در گیت‌هاب</h3>
    <p>
      پروژه نهایی خود را در ریپازیتوری‌تان در گیت‌هاب آپلود کنید؛
      حتماً در نظر داشته باشید که درون پروژه‌تان، فایل <Important>gitignore.</Important> قرار داشته باشد و درون آن، فایل‌های اضافی 
      برنامه، که قصد ندارید آپلود شوند؛ لیست شده باشند.
    </p>
  </>
  )
  },
  {
  step: "۷",
  content: (
  <>
    <h3>اتصال لیارا به گیت‌هاب</h3>
    <p>
      برای اتصال حساب لیارا خود به گیت‌هاب، در لیارا بر روی پروفایل خود کلیک کرده و وارد زیر قسمت <a href="https://console.liara.ir/settings/profile" className="text-[#2196f3]">حساب کاربری</a> شوید. در ادامه 
      وارد منوی <a href="https://console.liara.ir/settings/github" className="text-[#2196f3]">گیت‌هاب</a> شوید و بر روی دکمه <b>اتصال به گیت‌هاب</b>، کلیک کنید. 
    </p>
    <div className="h-1" />
    <img src="https://files.liara.ir/liara/docs/connect-to-github-on-liara.png" alt="connect to github on liara account" />
    <div className="h-1" />
    <p> 
      پس از 
      انجام این کار و وارد کردن اطلاعات مربوط به گیت‌هاب، حساب لیارا شما به گیت‌هاب متصل خواهد شد.
    </p>
    <div className="h-1" />
    <img src="https://files.liara.ir/liara/docs/added-github-account-on-liara.png" alt="added github account on liara" />
    <div className="h-1" />

  <div className="h-2" />
  <Alert variant="error">
<p>
  در صورت مواجه با خطای "اتصال به Github"، بایستی از حساب لیارا خود، خارج شده و مجدداً به وسیله Github، به اکانت لیارا خود، وارد شوید.
</p>
</Alert>
  </>
  )
  },
  {
  step: "۸",
  content: (
  <>
    <h3>ویرایش دسترسی‌ها</h3>
    <p>
      بعد از اتصال به اکانت گیت‌هاب، بر روی گزینه <b>ویرایش دسترسی‌ها</b> کلیک کرده و ریپازیتوری (ریپازیتوری‌های) مدنظرتان را به حساب لیارا متصل کنید.
    </p>
    <div className="h-2" />
    <video
    src="https://files.liara.ir/liara/docs/edit-access-to-github-account.mp4"
    controls="controls"
    className="block w-full"
    width="100%"
    ></video>
    <div className="h-2" />
  </>
  )
  },
  {
  step: "۹",
  content: (
  <>
    <h3>استقرار برنامه</h3>
    <p>
        در نهایت، بر روی برنامه خود کلیک کرده وارد صفحه <b>استقرار جدید</b> شوید؛ سپس در منوی <b>گیت‌هاب</b>، ریپازیتوری مدنظرتان را انتخاب کرده و پس از انتخاب نوع استقرار و branch مدنظرتان، بر روی گزینه <b>اتصال به برنامه</b> کلیک کنید تا برنامه‌تان به ریپازیتوری مدنظرتان متصل شود.
        در نهایت، کافیست تا یک‌بار بر روی گزینه <b>استقرار دستی</b> کلیک کنید تا آخرین commit شما در لیارا مستقر شود.
    </p>
  <div className="h-2" />
            <video
            src="https://files.liara.ir/liara/docs/deploy-project-using-github.mp4"
            controls="controls"
            className="block w-full"
            width="100%"
            ></video>
  <div className="h-2" />
    <Alert variant="info">
<p>
  برای قطع ارتباط برنامه و ریپازیتوری نیز، می‌توانید بر روی دکمه <b>قطع اتصال</b> کلیک کنید تا تغییرات جدید، مستقر نشوند.
</p>
</Alert>
<div className="h-1" />

  </>
  )
  }

]}/>

  </>,

]} 
/>

<br/> 
        <div className='h-4' />
        <p>
            در صورتی که قصد دارید دستورات مدنظرتان، پس از استقرار برنامه، اجرا شوند؛ می‌توانید در فایل <Important>liara.json</Important> در آرایه‌ای به نام <Important>args</Important> آن‌ها را مشابه قطعه کد زیر، مشخص کنید: 
        </p>
                <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`{
    "args": [ "python3 app.py" ]
}`}
            </Highlight>
        </div>
        <div className='h-4' />
        <p>
            در صورت مشخص نکردن <Important>args</Important>، لیارا به صورت خودکار، دستور <Important>python3 main.py</Important> را، اجرا خواهد کرد.
        </p>
        <div className="h-4" />

<Alert variant="info">
<p>
لیارا با اجرای دستور <Important>pip install</Important> تمامی ماژول‌های موجود در فایل <Important>requirements.txt</Important> را نصب می‌کند. پس حتماً اسامی آن‌ها باید در این فایل باشد.
</p>
</Alert>
<div className="h-1" />

<div className="h-1" />

<Alert variant="success">
<p>
همچنین بخوانید: <Link className="text-[#2196f3] " href="./how-tos/create-app">استقرار قدم به قدم برنامه‌های Python در لیارا</Link>
</p>
</Alert>

</Layout>