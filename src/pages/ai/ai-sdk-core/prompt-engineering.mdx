import Layout from "@/components/Layout";
import Button from "@/components/Common/button";
import Section from "@/components/Common/section";
import Alert from "@/components/Common/alert";
import ThemePlatformIcon from "@/components/Common/themeIcons"
import Tabs from "@/components/Common/tab";
import Step from "@/components/Common/step";
import Card from "@/components/Common/card";
import Important from "@/components/Common/important";
import Highlight from "@/components/Common/highlight";
import Link from "next/link";
import PlatformIcon from "@/components/Common/icons";
import HighlightTabs from "@/components/Common/HighlightTabs";
import IconContainer from "@/components/Common/IconContainer";
import {
  GoContainer,
  GoDatabase,
  GoRocket,
  GoServer,
  GoMail,
  GoGlobe,
  GoArrowLeft,
  GoTelescope,
} from "react-icons/go";

import Head from "next/head";

<Layout>
<Head>
<title>مستندات مهندسی پرامپت در AI SDK - لیارا</title>
<meta property="og:title" content="مستندات خدمات رایانش ابری لیارا" />
<meta property="og:description" content="مستندات مربوط به آشنایی با مفهوم و تکنیک‌های مهندسی پرامپت یا Prompt Engineering در AI SDK با سرویس هوش مصنوعی لیارا"  />
</Head>


# مهندسی پرامپت در هوش مصنوعی
<hr className="mb-2" />

<Section id='tips' title='نکات قابل توجه' />

<Section id="prompts-for-tools" title="پرامپت‌‌هایی برای toolها" headingTag="h3" />

وقتی پرامپت‌هایی را ایجاد می‌کنید که شامل toolها هستند، با افزایش تعداد و پیچیدگی toolها، دریافت نتایج خوب ممکن است کمی دشوار باشد. 
در ادامه، نکاتی آمده است که به شما 
کمک می‌کند بهترین نتایج را دریافت کنید: 
<div className="h-4" />

۱. از مدلی استفاده کنید که در فراخوانی tool قوی باشد؛ مثل مدل <Important>openai/gpt-4o-mini</Important> یا <Important>openai/gpt-4.1</Important>. مدل‌های ضعیف‌تر غالباً در فراخوانی tool به صورت بهینه و بدون خطا، دچار مشکل می‌شوند. 
<div className="h-4" />

۲. از toolهای کمی استفاده کنید. مثلاً حداکثر 5 تا یا کمتر.
<div className="h-4" />

۳. پیچیدگی پارامترهای tool را پایین نگه دارید، zod schemaهای پیچیده با المنت‌های زیاد و تو در تو و اختیاری زیاد و ... می‌تواند برای مدل چالش برانگیز باشد. 
<div className="h-4" />

۴. از نام‌های معنادار برای toolها، پارامترها و ویژگی‌های پارامتر و ... استفاده کنید. 
هرچقدر اطلاعات بیشتری به مدل بدهید، بهتر می‌فهمد که شما چه چیزی می‌خواهید.
<div className="h-4" />

۵.  متد <Important>("...")describe</Important> را به propertyهای zod schema خود اضافه کنید تا به مدل
سرنخ‌هایی را در مورد هدف هر property دریافت کند.
<div className="h-4" />

۶. وقتی که خروجی یک tool ممکن است برای 
مدل نامشخص باشد و بین toolها وابستگی وجود دارد، از فیلد <Important>description</Important> در یک tool استفاده کنید 
تا اطلاعاتی  را در مورد خروجی اجرای tool فراهم کرده باشید. 
<div className="h-4" />

۷. می‌توانید مثال‌های ورودی/خروجی فراخوانی toolها را در پرامپت خود قرار دهید تا به مدل کمک کنید نحوه‌ی استفاده از toolها را درک کند. به یاد داشته باشید که toolها با آبجکت‌های JSON کار می‌کنند، بنابراین نمونه‌ها باید به فرمت JSON باشند.
<div className="h-4" />

به صورت کلی، هدف باید این باشد که تمام اطلاعات موردنیاز مدل را به شکلی شفاف و واضح در اختیار آن قرار دهید. 


<Section id="tool--structured-data-schemas" title="toolها و schemaهای داده‌های ساختاریافته" headingTag="h3" />

نگاشت اسکیماهای zod به ورودی‌های LLMها (که اغلب اسکیمای JSON می‌پذیرند)، همواره کار ساده‌ای نیست؛ زیرا این نگاشت یک به یک نیست. 

<Section id='zod-dates' title='تاریخ‌ها در zod' headingTag="h4"  />

zod از آبجکت‌های JavaScript Date استفاده می‌کند، در حالی که مدل‌ها، تاریخ‌ها را به صورت string (رشته) بر می‌گردانند. 
شما می‌توانید فرمت تاریخ را با استفاده از <Important>()z.string().datetime</Important> یا <Important>()z.string().date</Important> مشخص و اعتبار سنجی کنید. 
و سپس با استفاده از یک Zod transformer رشته را به یک آبجکت Date تبدیل نمایید.

<div className="h-4" />
<div dir='ltr'>
    <Highlight className="js">
        {`import { generateObject } from 'ai';
import { createOpenAI } from '@ai-sdk/openai';
import { config } from 'dotenv';
import { z } from 'zod';

config();
const my_model = createOpenAI({
  baseURL: process.env.BASE_URL!,
  apiKey: process.env.LIARA_API_KEY!,
});

const result = await generateObject({
  model: my_model('openai/gpt-4o-mini'),
  schema: z.object({
    events: z.array(
      z.object({
        event: z.string(),
        date: z
          .string()
          .date()
          .transform(value => new Date(value)),
      }),
    ),
  }),
  prompt: 'List 5 important events from the year 2000.',
});

console.log(result.object)`}
    </Highlight>
</div>

<hr className="mb-2" />
<Section id='debugging' title='اشکال‌زدایی (Debugging)' />

<Section id="inspecting-warnings" title="بررسی هشدارها" headingTag="h3" />

تمام ارائه‌دهندگان (Providerها) از تمامی قابلیت‌های AI SDK پشتیبانی نمی‌کنند. در مواردی که یک قابلیت پشتیبانی نمی‌شود، ارائه‌دهندگان یا exceptionهایی را throw می‌کنند یا warning بازمی‌گردانند. برای اطمینان از این‌که پرامپت، toolها و تنظیمات شما به درستی توسط ارائه‌دهنده پردازش می‌شوند، می‌توانید call warningها را بررسی کنید.

<div className="h-2" />
<div dir='ltr'>
    <Highlight className="js">
        {`import { generateText } from 'ai';
import { createOpenAI } from '@ai-sdk/openai';
import { config } from 'dotenv';

config();
const my_model = createOpenAI({
  baseURL: process.env.BASE_URL!,
  apiKey: process.env.LIARA_API_KEY!,
});

const result = await generateText({
  model: my_model('openai/gpt-4o-mini'),
  prompt: 'Hello, world!',
});

console.log(result.warnings);
`}
    </Highlight>
</div>

<hr className="mb-2" />
<Section id='http-request-bodies' title='بدنه‌های درخواست HTTP' />

می‌توانید بدنه‌های خام درخواست‌های HTTP را در مدل‌هایی که آن‌ها را در دسترس قرار می‌دهند (برای مثال OpenAI) بررسی کنید. این قابلیت به شما اجازه می‌دهد بار ارسالی (payload) دقیق را که به ارائه‌دهنده‌ی مدل فرستاده می‌شود، به‌صورت خاص بر اساس روش همان ارائه‌دهنده، مشاهده کنید.

<div className="h-2" />
<div dir='ltr'>
    <Highlight className="js">
        {`import { generateText } from 'ai';
import { createOpenAI } from '@ai-sdk/openai';
import { config } from 'dotenv';

config();
const my_model = createOpenAI({
  baseURL: process.env.BASE_URL!,
  apiKey: process.env.LIARA_API_KEY!,
});

const result = await generateText({
  model: my_model('openai/gpt-4o-mini'),
  prompt: 'Hello, world!',
});

console.log(result.request.body);`}
    </Highlight>
</div>
<div className="h-2" />

</Layout>