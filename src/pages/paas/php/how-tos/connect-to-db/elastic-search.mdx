import Layout from "@/components/Layout";
import Button from "@/components/Common/button";
import Section from "@/components/Common/section";
import Alert from "@/components/Common/alert";
import Tabs from "@/components/Common/tab";
import Step from "@/components/Common/step";
import Card from "@/components/Common/card";
import Important from "@/components/Common/important";
import Highlight from "@/components/Common/highlight";
import Link from "next/link";
import NextPage from "@/components/Common/nextpage";

import Head from "next/head";

<Layout>
<Head>
<title>مستندات اتصال به دیتابیس ElasticSearch در PHP - لیارا</title>
<meta property="og:title" content="مستندات خدمات رایانش ابری لیارا" />
<meta property="og:description" content="مستندات مربوط به اتصال به دیتابیس ElasticSearch در پلتفرم PHP در لیارا"  />
<meta property="og:image" content="https://files.liara.ir/liara/logos/liara-poster.jpg" />
</Head>
# اتصال به دیتابیس ElasticSearch در برنامه‌های PHP
<hr className="mb-2" />

برای اتصال به دیتابیس ElasticSearch، در ابتدا، باید با اجرای دستور زیر، پکیج موردنیاز آن را در پروژه خود در Local، نصب کنید:


<div className="h-2" />
    <div dir='ltr'>
    <Highlight className="bash">
        {`composer require elasticsearch/elasticsearch`}
    </Highlight>
    </div>
<div className="h-2" />

در ادامه، بایستی طبق مستندات <a href="/paas/details/envs" className="text-[#2196f3] ">تنظیم متغیرهای محیطی</a>، متغیرهای محیطی مربوط به دیتابیس خود را به برنامه، در لیارا، اضافه کنید؛ به عنوان مثال:

<div className="h-2" />
    <div dir='ltr'>
    <Highlight className="bash">
        {`ELASTIC_SEARCH=http://elastic:bmTDS5Rb2R1R9x2BJxio1Hje@bromo.liara.cloud:34546`}
    </Highlight>
    </div>
<div className="h-2" />

در نهایت، می‌توانید با استفاده از قطعه کد زیر، به دیتابیس خود متصل شده و از آن، استفاده کنید:

<div className="h-2" />
    <div dir='ltr'>
    <Highlight className="php">
        {`<?php

require 'vendor/autoload.php';
use Elastic\\Elasticsearch\\ClientBuilder;

$hosts = [
    getenv("ELASTIC_SEARCH")
];

$client = ClientBuilder::create()
                        ->setHosts($hosts)
                        ->build();

try {
    $response = $client->ping();

    if ($response) {
        echo "connection successfull.";
    } else {
        echo "connection failed.";
    }
} catch (Exception $e) {
    echo "error in connection: ", $e->getMessage();
}
`}
    </Highlight>
    </div>
<div className="h-2" />

</Layout>