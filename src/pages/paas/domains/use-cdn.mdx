import Layout from "@/components/Layout";
import Button from "@/components/Common/button";
import Section from "@/components/Common/section";
import Alert from "@/components/Common/alert";
import Tabs from "@/components/Common/tab";
import Step from "@/components/Common/step";
import Card from "@/components/Common/card";
import Important from "@/components/Common/important";
import Highlight from "@/components/Common/highlight";
import Link from "next/link";
import PlatformIcon from "@/components/Common/icons";
import {
    GoArrowLeft,
} from "react-icons/go";

import Head from "next/head";

<Layout>
<Head>
<title>مستندات استفاده از CDN - لیارا</title>
<meta property="og:title" content="مستندات خدمات رایانش ابری لیارا" />
<meta property="og:description" content="مستندات مربوط به نحوه استفاده از CDN در لیارا"  />
</Head>
# استفاده از CDN

<hr className="mb-2" />
**CDN** یا شبکه توزیع محتوا (Content Delivery Network)، سیستمی از سرورهاست که در مناطق مختلف جهان مستقر شده‌اند و وظیفه اصلی آن‌ها افزایش سرعت تحویل محتواهای اینترنتی به کاربران است. وقتی شما یک وب‌سایت یا برنامه‌ای را باز می‌کنید، محتوای آن می‌تواند از نزدیک‌ترین سرور CDN به شما بارگذاری شود، به جای این که از سرور اصلی که ممکن است کیلومترها دورتر باشد دریافت شود.

<div className="h-4" />
اگر که از سرویس‌های DNS دیگری به جز <a href="/dns-management-system/about/" className="text-[#2196f3]">سامانه DNS لیارا</a> استفاده می‌کنید و 
سرویس مدنظرتان از CDN نیز پشتیبانی می‌کند؛ شما می‌توانید از این قابلیت در 
برنامه‌های خود در لیارا، بهره‌مند شوید.
به صورت کلی، استفاده از CDN در برنامه‌های لیارا، سه حالت دارد:

<div className="h-4" />
<ul>
    <li><b>گواهی SSL از سمت لیارا غیرفعال و از سمت CDN غیرفعال:</b> در این حالت، ارتباط لیارا با CDN و ارتباط CDN با Client بدون رمزنگاری و مستقیم است. این حالت، فاقد امنیت است و استفاده از آن، توصیه نمی‌شود.</li>
    <div className="h-1" />
    <li><b>گواهی SSL از سمت لیارا غیرفعال و از سمت CDN فعال:</b> در این حالت، ارتباط لیارا با CDN بدون رمزنگاری و ارتباط CDN با Client با رمزنگاری است. این حالت، پیشنهاد می‌شود.</li>
    <div className="h-1" />
    <li><b>گواهی SSL از سمت لیارا فعال و از سمت CDN غیرفعال:</b> در این حالت، اتصال لیارا با CDN رمزنگاری شده است ولی ارتباط CDN با CLient فاقد رمز‌نگاری است.</li>
    <div className="h-1" />
    <li><b>گواهی SSL از سمت لیارا فعال و از سمت CDN فعال:</b> در این حالت، هم ارتباط لیارا با CDN و هم ارتباط CDN با Client کاملاً رمزنگاری شده (Full Encrypted) و ایمن است؛ دو بار hand-shaking صورت می‌گیرد و ممکن است تا حدودی سرعت برنامه پایین بیاید. استفاده از این حالت برای برقراری اتصال امن، توصیه می‌شود. </li>
    <div className="h-1" />
</ul>
<div className="h-4" />

<Alert variant="warning">
<p>
    برای تهیه گواهی SSL لیارا، در صورتی که رکورد <Important>acme-challenge</Important> را به سامانه مدیریت دامنه خود اضافه نکرده‌اید و 
    در صورتی که CDN فعال است، باید CDN را به صورت موقت غیرفعال نمایید و پس از تهیه گواهی SSL، آن را فعال کنید.
</p>
</Alert>
<Alert variant="success">
<p>
همچنین بخوانید: <a href="/paas/domains/acme-challenge-record" className="text-[#2196f3]">آشنایی با رکورد acme-challenge</a>
</p>
</Alert>

<Section id="fix-502-cdn" title="رفع خطای 502 هنگام استفاده از CDN" />
اگر که با خطای 502 مواجه می‌شوید؛ ممکن است که 
در درخواست‌هایی که از سمت CDN به لیارا، ارسال می‌شود؛ خطای مربوط به TLS hand-shake وجود داشته باشد،
که غالباً ممکن است بخاطر فعال یا غیرفعال بودن SSL از سمت لیارا باشد. 

برای رفع این خطا، اگر ارتباط CDN با لیارا، بر روی <Important>HTTP</Important> تنظیم شده است؛ گواهی SSL از سمت لیارا هم باید غیرفعال شود. 
و یا اگر که ارتباط CDN با لیارا بر روی <Important>HTTPS</Important> تنظیم شده است، گواهی SSL نیز باید از سمت لیارا، فعال باشد.
{/* <img src="https://media.liara.ir/docs/enable-ssl-domain.gif" alt="enable ssl"/> */}


</Layout>
