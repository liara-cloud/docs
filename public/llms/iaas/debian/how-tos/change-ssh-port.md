Original link: https://docs.liara.ir/iaas/debian/how-tos/change-ssh-port/

# تغییر پورت SSH سرور مجازی ابری دبیان در لیارا

پورت پیش‌فرض SSH در لینوکس و اکثر سیستم‌ها `22` است. این پورت برای ارتباط امن از راه دور (Secure Shell) به‌کار می‌رود و به مدیران سیستم اجازه می‌دهد تا به سرورها متصل شوند و دستورات را اجرا کنند. بااین‌حال، بسیاری از افراد پورت پیش‌فرض را تغییر می‌دهند تا امنیت را افزایش دهند. 

دلیل اصلی این کار کاهش حملات Brute Force و Port Scanning است، زیرا ربات‌ها و مهاجمان معمولاً به‌صورت خودکار پورت `22` را هدف قرار می‌دهند. تغییر پورت به مقدار دیگری باعث می‌شود تلاش‌های نفوذ کاهش یابد، هرچند به‌تنهایی امنیت را تضمین نمی‌کند و باید در کنار روش‌هایی مانند کلیدهای SSH و فایروال استفاده شود.

برای تغییر پورت SSH، در ابتدا، طبق مستندات [اتصال به سرور با SSH](https://docs.liara.ir/iaas/Debian/how-tos/connect-to-server-using-ssh)، به سرور متصل شوید و سپس با استفاده از `nano` فایل `etc/ssh/sshd_config/` را، باز کنید.

> در صورتی که با کاربر `root` به سرور دبیان متصل شده‌اید، نیازی نیست که از عبارت `sudo` قبل از دستورات استفاده کنید.

```bash
sudo nano /etc/ssh/sshd_config
```

برای تغییر پورت پیش‌فرض SSH، باید علامت `#` را از ابتدای خط `Port 22 #` حذف کرده و مقدار `22` را به پورت دلخواه خود تغییر دهید. در مثال زیر، مقدار `22` به `20202` تغییر داده شده است، بنابراین از این پس، تنها از طریق پورت `20202` می‌توان به سرور متصل شد:

```config
# The strategy used for options in the default sshd_config shipped with
# OpenSSH is to specify options with their default value where
# possible, but leave them commented.  Uncommented options override the
# default value.

Include /etc/ssh/sshd_config.d/*.conf

Port 20202
#AddressFamily any
#ListenAddress 0.0.0.0
#ListenAddress ::
```

پس از اعمال تغییرات فوق، کلیدهای ترکیبی `Ctrl + X` و سپس `Y` را بزنید تا تغییرات ذخیره شود و سپس کلید `Enter` را بزنید تا از ویرایشگر خارج شوید.

پس از انجام کار فوق و در صورتی که از firewall استفاده می‌کنید؛ باید دسترسی پورت جدید را آزاد کنید؛ به عنوان مثال، اگر که از UFW استفاده می‌کنید، می‌توانید دستور زیر را،اجرا کنید:

```bash
sudo ufw allow 20202/tcp
```

برای اعمال تغییرات، سرور را مجدداً راه‌اندازی کنید، می‌توانید برای این کار، از دستور زیر استفاده کنید: 

```bash
reboot
```

یا اینکه، سیگنال راه‌اندازی مجدد را طبق مستندات [سیگنال‌ها](https://docs.liara.ir/iaas/details/signals)، ارسال کنید.

بعد از راه‌اندازی مجدد سرور، می‌توانید با استفاده از SSH و فلگ `p-`، تغییرات را بررسی کنید. این فلگ برای تعیین شماره پورت جدید سرور به‌کار می‌رود:

```bash
ssh <user-name>@<your-ip-address> -p <new-port-number>
```

در قطعه کد فوق، به جای `user-name`، نام کاربری خود را و به جای `your-ip-address`، آدرس IP سرور خود را و به جای `new-port-number`، پورت جدید تعیین شده را وارد کنید.
درصورتی‌که ورود موفقیت‌آمیز باشد، یعنی پورت SSH به‌درستی تغییر کرده است.

## all links

[All links of docs](https://docs.liara.ir/all-links-llms.txt)
