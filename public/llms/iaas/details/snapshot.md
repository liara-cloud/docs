Original link: https://docs.liara.ir/iaas/details/snapshot/

# تهیه اسنپ شات و کار با آن در سرور مجازی

اسنپ‌شات، یک تصویر کامل و لحظه‌ای از وضعیت سرور مجازی (فایل‌ها، تنظیمات و حافظه) است که برای بازگردانی سریع سرور به همان لحظه استفاده می‌شود.  
در ادامه، مفهوم، نحوه تهیه و استفاده از اسنپ‌شات در سرور مجازی لیارا، بررسی شده است.

## اسنپ شات چیست؟

اسنپ‌شات (snapshot) یک کپی یا یک نمایش کامل در لحظه از وضعیت یک سرور مجازی است. اسنپ‌شات‌ها اغلب برای پشتیبان‌گیری، بازیابی و مدیریت داده‌ها مورد استفاده قرار می‌گیرند.  
آن‌ها داده‌ها و تنظیمات سرور مجازی را در یک لحظه‌ی مشخص ثبت می‌کنند و این امکان را به شما می‌دهند که در صورت نیاز، سرور مجازی را به همان وضعیت بازگردانید یا بدون لحظه‌ای وقفه در عملیات فعلی سیستم، نسخه‌های پشتیبان سازگار و یکپارچه ایجاد کنید.

## نحوه تهیه اسنپ شات از سرور

برای تهیه اسنپ‌شات از سرور مجازی لیارا، کافیست تا در [کنسول لیارا](https://docs.liara.ir) در بخش **سرور مجازی** وارد سرور مورد نظر خود شده و  
در بخش **اسنپ‌شات‌ها**، بر روی گزینه **ایجاد اسنپ‌شات** کلیک کنید.

[Video link](https://media.liara.ir/iaas/create-snapshot.mp4)

با انجام عملیات فوق، اسنپ‌شات شما ایجاد می‌شود.

## نحوه استفاده از اسنپ شات

برای ریکاوری اطلاعات ذخیره‌شده در اسنپ‌شات مدنظرتان، تنها کافیست تا وارد بخش **اسنپ‌شات‌‎ها** در سرور مجازی خود در کنسول شوید و بر روی دکمه **برگرداندن اسنپ‌شات** کلیک کنید.

> بازیابی اسنپ‌شات منجر به خاموش شدن سرور مجازی شما می‌شود، پس از بازیابی، بایستی طبق [مستندات ارسال سیگنال](https://docs.liara.ir/iaas/details/signals/#turning-on-signal)، سیگنال **روشن شدن** را به سرور خود، ارسال کنید.

[Video link](https://media.liara.ir/iaas/restore-snapshot.mp4)

## نحوه حذف اسنپ شات

برای حذف اسنپ‌شات تهیه شده تنها کافیست تا در بخش **اسنپ‌شات‌ها** در سرور مجازی مدنظرتان، بر روی آیکن **حذف اسنپ‌شات** کلیک کرده و سپس در پنجره جدید باز شده، بر روی **حذف** کلیک کنید تا اسنپ‌شات حذف شود.

[Video link](https://media.liara.ir/iaas/delete-snapshot.mp4)

> در نظر داشته باشید که با حذف اسنپ‌شات، امکان بازیابی آن وجود نخواهد داشت و اسنپ‌شات به صورت کامل، حذف خواهد شد.

## ملزومات استفاده از اسنپ شات

در هنگام استفاده از اسنپ‌شات‌ها، به نکات زیر توجه بفرمایید:

- به ازای هرگیگابات حجم اسنپ‌شات، به صورت ساعتی، مبلغ مشخصی از حساب شما کسر می‌شود (مثلاً ماهانه ۱۰ هزارتومان)
- بعد از هر عملیات در بخش اسنپ‌شات‌ها، در بخش [رویدادها](https://docs.liara.ir/iaas/details/events/)، رویداد `GET_VM_SNAPSHOTS` باید **موفق** باشد تا عملیات به درستی انجام شود.
- در صورتی که رویداد `GET_VM_SNAPSHOTS` **ناموفق** باشد، بایستی عملیات مدنظر خود را مجدداً انجام دهید تا رویداد، **موفق** شود
- اسنپ‌شات‌ها صرفاً شامل محتویات دیسک هستند و محتویات RAM را در بر نمی‌گیرند
- افزایش تعداد اسنپ‌شات‌ها می‌تواند منجر به کاهش سرعت دیسک سرور مجازی شما شود

## چرا افزایش اسنپ‌شات‌ها منجر به کاهش سرعت سرور مجازی می‌شود؟

افزایش تعداد Snapshot در سرورهای مجازی ابری به‌طور مستقیم موجب افت عملکرد دیسک می‌شود، زیرا این Snapshotها در سیستم‌های ذخیره‌سازی ابری معمولاً بر پایه لایه‌های تفاضلی (Delta Layers) ایجاد می‌شوند. با هر Snapshot جدید، یک لایه Delta اضافه شده و ساختار Volume به یک زنجیره چندلایه تبدیل می‌شود.

در معماری ذخیره‌سازی ابری، Snapshotهای زیاد باعث ایجاد لایه‌های متعدد می‌شود که هم خواندن و هم نوشتن را کند می‌کند؛ زیرا سیستم باید هر بلوک را در چندین لایه جستجو و پردازش کند. این موضوع سربار Metadata، افزایش Fragmentation و کاهش IOPS را به‌دنبال دارد و حتی عملیات‌هایی مثل Merge , Backup و Restore را نیز کند می‌کند. به همین دلیل افزایش Snapshot مستقیماً باعث افت کارایی دیسک در Cloud می‌شود.

## all links

[All links of docs](https://docs.liara.ir/all-links-llms.txt)
