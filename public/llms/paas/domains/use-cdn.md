Original link: https://docs.liara.ir/paas/domains/use-cdn/

# استفاده از CDN

**CDN** یا شبکه توزیع محتوا (Content Delivery Network)، سیستمی از سرورهاست که در مناطق مختلف جهان مستقر شده‌اند و وظیفه اصلی آن‌ها افزایش سرعت تحویل محتواهای اینترنتی به کاربران است. وقتی شما یک وب‌سایت یا برنامه‌ای را باز می‌کنید، محتوای آن می‌تواند از نزدیک‌ترین سرور CDN به شما بارگذاری شود، به جای این که از سرور اصلی که ممکن است کیلومترها دورتر باشد دریافت شود.

اگر که از سرویس‌های DNS دیگری به جز [سامانه DNS لیارا](https://docs.liara.ir/dns-management-system/about/) استفاده می‌کنید و  
سرویس مدنظرتان از CDN نیز پشتیبانی می‌کند؛ شما می‌توانید از این قابلیت در  
برنامه‌های خود در لیارا، بهره‌مند شوید.  
به صورت کلی، استفاده از CDN در برنامه‌های لیارا، سه حالت دارد:

- **گواهی SSL از سمت لیارا غیرفعال و از سمت CDN غیرفعال:** در این حالت، ارتباط لیارا با CDN و ارتباط CDN با Client بدون رمزنگاری و مستقیم است. این حالت، فاقد امنیت است و استفاده از آن، توصیه نمی‌شود.
- **گواهی SSL از سمت لیارا غیرفعال و از سمت CDN فعال:** در این حالت، ارتباط لیارا با CDN بدون رمزنگاری و ارتباط CDN با Client با رمزنگاری است. این حالت، پیشنهاد می‌شود.
- **گواهی SSL از سمت لیارا فعال و از سمت CDN غیرفعال:** در این حالت، اتصال لیارا با CDN رمزنگاری شده است ولی ارتباط CDN با CLient فاقد رمز‌نگاری است.
- **گواهی SSL از سمت لیارا فعال و از سمت CDN فعال:** در این حالت، هم ارتباط لیارا با CDN و هم ارتباط CDN با Client کاملاً رمزنگاری شده (Full Encrypted) و ایمن است؛ دو بار hand-shaking صورت می‌گیرد و ممکن است تا حدودی سرعت برنامه پایین بیاید. استفاده از این حالت برای برقراری اتصال امن، توصیه می‌شود.

> برای تهیه گواهی SSL لیارا، در صورتی که رکورد `acme-challenge` را به سامانه مدیریت دامنه خود اضافه نکرده‌اید و  
> در صورتی که CDN فعال است، باید CDN را به صورت موقت غیرفعال نمایید و پس از تهیه گواهی SSL، آن را فعال کنید.  
> همچنین بخوانید: [آشنایی با رکورد acme-challenge](https://docs.liara.ir/paas/domains/acme-challenge-record)

## رفع خطای 502 هنگام استفاده از CDN

اگر که با خطای 502 مواجه می‌شوید؛ ممکن است که  
در درخواست‌هایی که از سمت CDN به لیارا، ارسال می‌شود؛ خطای مربوط به TLS hand-shake وجود داشته باشد،  
که غالباً ممکن است بخاطر فعال یا غیرفعال بودن SSL از سمت لیارا باشد.

برای رفع این خطا، اگر ارتباط CDN با لیارا، بر روی `HTTP` تنظیم شده است؛ گواهی SSL از سمت لیارا هم باید غیرفعال شود.  
و یا اگر که ارتباط CDN با لیارا بر روی `HTTPS` تنظیم شده است، گواهی SSL نیز باید از سمت لیارا، فعال باشد.

## all links

[All links of docs](https://docs.liara.ir/all-links-llms.txt)
